UNAME = $(shell uname)
CC = gcc
SRC = src/ConfigFile.cpp src/main.cpp src/GameOfLife.cpp
EXEC = game
# Linux library flags
LDFLAGS	= -lGL -lglut -lGLU
# MacOS library flags
ifeq "$(UNAME)" "Darwin"
	LDFLAGS	= -framework OpenGL -framework GLUT
endif

all: compile run clean

compile: 
	$(CC) $(LDFLAGS) $(SRC) -o $(EXEC)

clean:
	rm -rf $(EXEC) *~

run:
	./$(EXEC) game.config
mp:
	gcc config/ConfigFile.cpp src/main.cpp src/GameOfLife.cpp -g -o src/game -lOpenCL -lglut -lGLEW -lGLU -lGL -fopenmp -lstdc++ -lm
dmp:
	valgrind --tool=helgrind ./game
cl:
	gcc opencl/gol.cpp -o opencl/gol -g -lOpenCL -lglut -lGLEW -lGLU -lGL -fopenmp -lstdc++ -lm
dcl:
	valgrind --tool=helgrind ./opencl/gol